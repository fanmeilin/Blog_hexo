---
title: 剑指offer19 
tags: [剑指,动态规划]
categories: [剑指,动态规划]
date: 2021-08-21 15:28:32
math: true
---

> 正则表达式匹配

## 题目

请实现一个函数用来匹配包含'. '和'*'的正则表达式。模式中的字符'.'表示任意一个字符，而'*'表示它前面的字符可以出现任意次（含0次）。在本题中，匹配是指字符串的所有字符匹配整个模式。例如，字符串"aaa"与模式"a.a"和"ab*ac*a"匹配，但与"aa.a"和"ab*a"均不匹配。

### 示例 1：

```
输入:
s = "aa"
p = "a"
输出: false
解释: "a" 无法匹配 "aa" 整个字符串。
```

### 示例 2：

```
输入:
s = "aa"
p = "a*"
输出: true
解释: 因为 '*' 代表可以匹配零个或多个前面的那一个元素, 在这里前面的元素就是 'a'。因此，字符串 "aa" 可被视为 'a' 重复了一次。
```
### 示例 3：

```
输入:
s = "ab"
p = ".*"
输出: true
解释: ".*" 表示可匹配零个或多个（'*'）任意字符（'.'）。
```

### 示例 4：

```
输入:
s = "aab"
p = "c*a*b"
输出: true
解释: 因为 '*' 表示零个或多个，这里 'c' 为 0 个, 'a' 被重复一次。因此可以匹配字符串 "aab"。
```
### 示例 5：

```
输入:
s = "mississippi"
p = "mis*is*p*."
输出: false
```

### 提示：

- `s` 可能为空，且只包含从 `a-z` 的小写字母。
- `p` 可能为空，且只包含从 `a-z` 的小写字母以及字符 `.` 和 `*`，无连续的 `'*'`。

## 题解

动态规划的核心是建立状态转移方程。dp\[i][j]表示前j个模式串匹配s的前i个字母的匹配情况。

那么就要分情况讨论了，一种是p[j]是`字母`，第二是` .` ,第三是 `*`.

1. `字母`:直接判断是否一致，如果$p[j]==s[i]$就可以转移 $dp[i][j] = dp[i-1][j-1]$

2. ` .` : 可以匹配任意字符直接转移$dp[i][j] = dp[i-1][j-1]$

3.  `*`：如果前一个字符$p[j-1]==s[i]$，那么这个`*`可以选择是匹配s的**一个元素还是多个元素**

    $dp[i][j] = dp[i][j-2] \quad or \quad dp[i-1][j]$
   
   如果元素不相等，就直接向前匹配（0次匹配）$dp[i][j-2]$
   
   > $dp[i][j-2]$是匹配0个；$dp[i-1][j]$是匹配多个，忽略i元素继续向前查找；$dp[i-1][j-2]$是匹配1个是包含于多个$dp[i-1][j]$中

```python
class Solution:
    def isMatch(self, s: str, p: str) -> bool:
        s = " "+s
        p = " "+p
        dp = [[False for _ in range(len(p))] for _ in range(len(s))]
        dp[0][0] = True
        for i in range(0,len(s)):
            for j in range(1,len(p)):
                if(p[j]!='*'):
                    if((p[j]=='.' and s[i]!=" ") or p[j]==s[i]):
                        dp[i][j] = dp[i-1][j-1]
                else:
                    if(p[j-1]==s[i] or (p[j-1]=='.' and s[i]!=" ")): dp[i][j] = dp[i][j-2] or dp[i-1][j-2] or dp[i-1][j] 
                    #dp[i][j] = dp[i][j-2] or dp[i-1][j] #直接0次或者多次
                    else:dp[i][j] = dp[i][j-2]
        return dp[len(s)-1][len(p)-1]
```

